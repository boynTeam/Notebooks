---
title: 面试题43 1~n整数中1出现的次数
date: 2019-11-05 19:19:57
tags:
	- 算法
	- 刷题
	- 剑指Offer
    - 数字
categories:
	- 算法
	- 刷题
---

## 问题描述

 求出1~13的整数中1出现的次数,并算出100~1300的整数中1出现的次数？为此他特别数了一下1~13中包含1的数字有1、10、11、12、13因此共出现6次,但是对于后面问题他就没辙了。ACMer希望你们帮帮他,并把问题更加普遍化,可以很快的求出任意非负整数区间中1出现的次数（从1 到 n 中1出现的次数）。 

<!--more-->

## 思路

这道题在Leetcode中是困难难度,虽然有一种简单的解法,但是其时间效率基本是不可接收的.在这篇文章我们会介绍基于数学规律的方法

这道题的解法可以根据数位来数1.举个例子,当我们只看个位数的时候,1的个数如下

![](http://imageblog.boyn.top/201911051627_852.png)

在[1,10]中,个位数有一个1

在[1,20]中,个位数有两个1,1和11

以此类推,比如说在[1,160]中有16个,而在[1,161]中有17个.那么,就有这样的公式,个位数的数字为
$$
n=(n/10)+(n\%10!=0)
$$
那么10位数的呢?在10位数中,只有包含[10,19]的数中含有1

![](http://imageblog.boyn.top/201911051632_296.png)

如上一样分析,可以看到[1,100],10位数中有10个1,[1,200]中有20个1,而[1,210],有21个1,[1,21x],有20+x个1,而[1,220]就有20+10个1
$$
(n/100)*10 + min(max(n\%100 - 10 + 1, 0) , 10)
$$
那么其实百位数也可以按照这样的思想

![](http://imageblog.boyn.top/201911051639_213.png)
$$
(n/1000)*100 + min(max(n\%1000-100+1,0),100)
$$
我们可以看到,其实前面的部分可以用(i为在第i位数)
$$
(n / (i*10)) * i
$$
后面的部分可以统一成
$$
min(max((n \%(i*10))−i+1,0),i)
$$
所以,其实每一个数位上1的个数都可以统一成这样的一个公式
$$
(n / (i*10)) * i+min(max((n \%(i*10))−i+1,0),i)
$$
我们来看一个例子吧，有一个数 n = 1234。

个位上1 的数量 = 1234/10 (对应 1,11,21,...1221) + min(4,1) (对应 1231) = 124

十位上1的数量 = (1234/100)*10 (对应 10,11,12,...,110,111,...1919) + min(21,10) (对应 1210,1211,...1219) = 130

百位上1的数量 = (1234/1000)*100 (对应 100,101,102,...,199) +min(135,100) (对应1100,1101...1199) = 200

千位上1的数量 = (1234/10000)*10000+min(235,1000) (对应1000,1001,...1234) = 235

因此，总数 = 124+130+200+235=689

所以,我们根据这个,写出代码

## 编码



```java
public class Solution {
    public int NumberOf1Between1AndN_Solution(int n) {
        int count = 0;
        for(int i = 1 ;i<=n;i*=10){
            count += (n/(i*10))*i + Math.min(Math.max(n%(i*10)-i+1,0),i);
        }
        return count;
    }
}
```

## 做题记录



| 状态 | 日期          | 评价                                     |
| ---- | ------------- | ---------------------------------------- |
| 💪    | 2019年11月5日 | 考察对数学规律的归纳,这道题做的很不熟练. |